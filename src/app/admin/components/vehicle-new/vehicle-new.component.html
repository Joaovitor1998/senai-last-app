<div>

    <form [formGroup]="form" (ngSubmit)="onSubmit()" class="w-50 mx-auto">

        <div class="vehicle-form" formGroupName="vehicle">

            <div class="header col text-center mb-3 mt-2">
                <h2>Vehicle</h2>
            </div>

            <div class="row">

                <div class="col mb-3">

                    <input type="text" id="model" placeholder="Modelo" class="form-control col" formControlName="model">
                    <app-form-error-message *ngIf="hasError('required', ['vehicle', 'model'])"
                        [message]="'Campo obrigatório.'">
                    </app-form-error-message>

                </div>

                <div class="col mb-3">

                    <input type="number" min="0" placeholder="Volume Total" class="form-control"
                        formControlName="totalVolume">

                    <app-form-error-message *ngIf="hasError('min', ['vehicle', 'totalVolume'])"
                        [message]="'Deve ser maior ou igual a zero.'">
                    </app-form-error-message>
                    <app-form-error-message *ngIf="hasError('required', ['vehicle', 'totalVolume'])"
                        [message]="'Campo obrigatório.'">
                    </app-form-error-message>

                </div>
            </div>

            <div class="row">

                <div class="col mb-3">

                    <input type="number" min="0" placeholder="Conectados" class="form-control"
                        formControlName="connected">
                    <app-form-error-message *ngIf="hasError('min', ['vehicle', 'connected'])"
                        [message]="'Deve ser maior ou igual a zero.'">
                    </app-form-error-message>
                    <app-form-error-message *ngIf="hasError('required', ['vehicle', 'connected'])"
                        [message]="'Campo obrigatório.'">
                    </app-form-error-message>

                </div>

                <div class="col mg-3">
                    <input type="number" min="0" placeholder="Software Updates" class="form-control"
                        formControlName="softwareUpdates">
                    <app-form-error-message *ngIf="hasError('min', ['vehicle', 'softwareUpdates'])"
                        [message]="'Deve ser maior ou igual a zero.'">
                    </app-form-error-message>
                    <app-form-error-message *ngIf="hasError('required', ['vehicle', 'softwareUpdates'])"
                        [message]="'Campo obrigatório.'">
                    </app-form-error-message>

                </div>
            </div>

        </div>


        <div class="vehicle-data-form" formGroupName="vehicleData">

            <div class="col text-center mb-3 mt-2">
                <h2>Vehicle Data</h2>
            </div>

            <div class="col mb-3">
                <input type="text" placeholder="Código - Vin" class="form-control"
                    formControlName="vinCode">
                <app-form-error-message *ngIf="hasError('required', ['vehicleData', 'vinCode'])"
                    [message]="'Campo obrigatório.'">
                </app-form-error-message>
                <app-form-error-message *ngIf="hasError('minlength', ['vehicleData', 'vinCode'])"
                    [message]="'Campo deve ter ao menos 20 caracteres.'">
                </app-form-error-message>
            </div>

            <div class="row">

                <div class="col mb-3">

                    <input type="number" min="0" placeholder="Odômetro" class="form-control" formControlName="odometer">
                    <app-form-error-message *ngIf="hasError('required', ['vehicleData', 'odometer'])"
                        [message]="'Campo obrigatório.'">
                    </app-form-error-message>
                    <app-form-error-message *ngIf="hasError('min', ['vehicleData', 'odometer'])"
                        [message]="'Valor mínimo deve ser 0.'">
                    </app-form-error-message>

                </div>

                <div class="col mb-3">
                    <input type="text" pattern="[0-9]{2},[0-9]{2},[0-9]{2},[0-9]{2}" placeholder="Pressão dos Pneus"
                        class="form-control" formControlName="tirePressure">
                    <app-form-error-message *ngIf="hasError('required', ['vehicleData', 'tirePressure'])"
                        [message]="'Campo obrigatório.'">
                    </app-form-error-message>
                    <app-form-error-message *ngIf="hasError('pattern', ['vehicleData', 'tirePressure'])"
                        [message]="'Erro! Ex: 11,22,33,44'">
                    </app-form-error-message>
                </div>
            </div>

            <div class="row">

                <div class="col mb-3">
                    <select class="form-select" (change)="vehicleStatusChange($event)">
                        <option disabled selected>Status do Veículo</option>
                        <option value="on">On</option>
                        <option value="off">Off</option>
                    </select>
                    <app-form-error-message *ngIf="hasError('required', ['vehicleData', 'vehicleStatus'])"
                        [message]="'Campo obrigatório.'">
                    </app-form-error-message>
                </div>

                <div class="col mb-3">
                    <select class="form-select" (change)="batteryStatusChange($event)">
                        <option disabled selected>Status da Bateria</option>
                        <option value="ok">Ok</option>
                        <option value="recharge">Recharge</option>
                    </select>
                    <app-form-error-message *ngIf="hasError('required', ['vehicleData', 'batteryStatus'])"
                        [message]="'Campo obrigatório.'">
                    </app-form-error-message>

                </div>
            </div>

            <div class="col mb-3">
                <input type="text" placeholder="Nível de Combustível" class="form-control" formControlName="fuelLevel">
                <app-form-error-message *ngIf="hasError('required', ['vehicleData', 'fuelLevel'])"
                    [message]="'Campo obrigatório.'">
                </app-form-error-message>
            </div>

            <div class="row">

                <div class="col mb-3">
                    <input type="text" placeholder="Latitude" class="form-control mb-3" formControlName="lat">
                    <app-form-error-message *ngIf="hasError('required', ['vehicleData', 'lat'])"
                        [message]="'Campo obrigatório.'">
                    </app-form-error-message>
                    <app-form-error-message *ngIf="hasError('pattern', ['vehicleData', 'lat'])"
                        [message]="'Formato inválido. (+12.123 | -12.123 | 12.123)'">
                    </app-form-error-message>
                </div>

                <div class="col mb-3">
                    <input type="text" placeholder="Longitude" class="form-control mb-3" formControlName="lon">
                    <app-form-error-message *ngIf="hasError('required', ['vehicleData', 'lon'])"
                        [message]="'Campo obrigatório.'">
                    </app-form-error-message>
                    <app-form-error-message *ngIf="hasError('pattern', ['vehicleData', 'lon'])"
                        [message]="'Formato inválido. (+12.123 | -12.123 | 12.123)'">
                    </app-form-error-message>
                </div>
            </div>

        </div>

        <div class="text-center">
            <input 
                type="submit" 
                value="Criar" 
                class="btn btn-primary w-50" 
                [disabled]="form.invalid">
        </div>


    </form>


</div>